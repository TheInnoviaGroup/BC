/*
 * Ext JS Library 1.0.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */

Ext.grid.GridView.UIController=function(_1){Ext.apply(this,_1);};Ext.grid.GridView.UIController.prototype={initUI:function(_2){_2.on("headerclick",this.onHeaderClick,this);if(_2.trackMouseOver){_2.on("mouseover",this.onRowOver,this);_2.on("mouseout",this.onRowOut,this);}},initEvents:function(){},onHeaderClick:function(g,_4){if(this.headersDisabled||!this.cm.isSortable(_4)){return;}g.stopEditing();g.dataSource.sort(this.cm.getDataIndex(_4));},onRowOver:function(e,t){var _7;if((_7=this.findRowIndex(t))!==false){this.addRowClass(_7,"x-grid3-row-over");}},onRowOut:function(e,t){var _a;if((_a=this.findRowIndex(t))!==false&&_a!==this.findRowIndex(e.getRelatedTarget())){this.removeRowClass(_a,"x-grid3-row-over");}},handleWheel:function(e){e.stopPropagation();},onRowSelect:function(_c){this.addRowClass(_c,"x-grid3-row-selected");},onRowDeselect:function(_d){this.removeRowClass(_d,"x-grid3-row-selected");},onCellSelect:function(_e,_f){var _10=this.getCell(_e,_f);if(_10){this.fly(_10).addClass("x-grid3-cell-selected");}},onCellDeselect:function(row,col){var _13=this.getCell(row,col);if(_13){this.fly(_13).removeClass("x-grid3-cell-selected");}},onColumnSplitterMoved:function(i,w){this.userResized=true;var cm=this.grid.colModel;cm.setColumnWidth(i,w,true);if(this.forceFit){this.fitColumns(true,false,i);this.updateAllColumnWidths();}else{this.updateColumnWidth(i,w);}this.grid.fireEvent("columnresize",i,w);},handleHdMenuClick:function(_17){var _18=this.hdCtxIndex;var cm=this.cm,ds=this.ds;switch(_17.id){case "asc":ds.sort(cm.getDataIndex(_18),"ASC");break;case "desc":ds.sort(cm.getDataIndex(_18),"DESC");break;case "lock":var lc=cm.getLockedCount();if(cm.getColumnCount(true)<=lc+1){this.onDenyColumnLock();return;}if(lc!=_18){cm.setLocked(_18,true,true);cm.moveColumn(_18,lc);this.grid.fireEvent("columnmove",_18,lc);}else{cm.setLocked(_18,true);}break;case "unlock":var lc=cm.getLockedCount();if((lc-1)!=_18){cm.setLocked(_18,false,true);cm.moveColumn(_18,lc-1);this.grid.fireEvent("columnmove",_18,lc-1);}else{cm.setLocked(_18,false);}break;default:_18=cm.getIndexById(_17.id.substr(4));if(_18!=-1){if(_17.checked&&cm.getColumnCount(true)<=1){this.onDenyColumnHide();return false;}cm.setHidden(_18,_17.checked);}}return true;},beforeColMenuShow:function(){var cm=this.cm,_1d=cm.getColumnCount();this.colMenu.removeAll();for(var i=0;i<_1d;i++){this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+cm.getColumnId(i),text:cm.getColumnHeader(i),checked:!cm.isHidden(i),hideOnClick:false}));}},handleHdCtx:function(g,_20,e){e.stopEvent();var hd=this.getHeaderCell(_20);this.hdCtxIndex=_20;var ms=this.hmenu.items,cm=this.cm;ms.get("asc").setDisabled(!cm.isSortable(_20));ms.get("desc").setDisabled(!cm.isSortable(_20));if(this.grid.enableColLock!==false){ms.get("lock").setDisabled(cm.isLocked(_20));ms.get("unlock").setDisabled(!cm.isLocked(_20));}this.hmenu.show(hd,"tl-bl");},handleHdOver:function(e,t){var hd=this.findHeaderCell(t);if(hd&&!this.headersDisabled){this.activeHd=hd;this.activeHdRegion=this.fly(hd).getRegion();if(this.grid.colModel.isSortable(this.getCellIndex(hd))){this.fly(hd).addClass("x-grid3-hd-over");}}},handleHdMove:function(e,t){if(this.activeHd&&!this.headersDisabled){var hw=this.splitHandleWidth||5;var r=this.activeHdRegion;var x=e.getPageX();var ss=this.activeHd.style;if(x-r.left<=hw){ss.cursor="e-resize";ss.cursor="col-resize";}else{if(r.right-x<=hw){ss.cursor="w-resize";ss.cursor="col-resize";}else{ss.cursor="";}}}},handleHdOut:function(e){var hd=this.findHeaderCell(e.getTarget());if(hd){this.activeHd=null;this.fly(hd).removeClass("x-grid3-hd-over");hd.style.cursor="";}},handleSplitDblClick:function(e,t){return;var i=this.getCellIndex(t);if(this.grid.enableColumnResize!==false&&this.cm.isResizable(i)&&!this.cm.isFixed(i)){this.autoSizeColumn(i,true);this.layout();}}};
