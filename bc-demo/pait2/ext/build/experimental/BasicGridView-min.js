/*
 * Ext JS Library 1.0.1
 * Copyright(c) 2006-2007, Ext JS, LLC.
 * licensing@extjs.com
 * 
 * http://www.extjs.com/license
 */

Ext.grid.BasicGridView=function(_1){Ext.grid.BasicGridView.superclass.constructor.call(this);this.el=null;Ext.apply(this,_1);};Ext.extend(Ext.grid.BasicGridView,Ext.grid.AbstractGridView,{rowClass:"x-grid-row",cellClass:"x-grid-col",tdClass:"x-grid-td",hdClass:"x-grid-hd",splitClass:"x-grid-split",sortClasses:["sort-asc","sort-desc"],enableMoveAnim:false,hlColor:"C3DAF9",dh:Ext.DomHelper,fly:Ext.Element.fly,css:Ext.util.CSS,borderWidth:1,splitOffset:3,scrollIncrement:22,cellRE:/(?:.*?)x-grid-(?:hd|cell|csplit)-(?:[\d]+)-([\d]+)(?:.*?)/,findRE:/\s?(?:x-grid-hd|x-grid-col|x-grid-csplit)\s/,init:function(_2){Ext.grid.BasicGridView.superclass.init.call(this,_2);this.bind(_2.dataSource,_2.colModel);_2.on("headerclick",this.handleHeaderClick,this);if(_2.trackMouseOver){_2.on("mouseover",this.onRowOver,this);_2.on("mouseout",this.onRowOut,this);}_2.cancelTextSelection=function(){};this.gridId=_2.id;var _3=this.templates||{};if(!_3.master){_3.master=new Ext.Template("<div class=\"x-grid\" hidefocus=\"true\">","<div class=\"x-grid-topbar\"></div>","<div class=\"x-grid-viewport\">","<div class=\"x-grid-header\">{header}</div>","<div class=\"x-grid-body\">{body}</div>","</div>","<div class=\"x-grid-bottombar\"></div>","<a href=\"#\" class=\"x-grid-focus\" tabIndex=\"-1\"></a>","<div class=\"x-grid-resize-proxy\">&#160;</div>","</div>");_3.master.disableformats=true;}if(!_3.header){_3.header=new Ext.Template("<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">","<tbody><tr class=\"x-grid-hd-row\">{cells}</tr></tbody>","</table>{splits}");_3.header.disableformats=true;}_3.header.compile();if(!_3.hcell){_3.hcell=new Ext.Template("<td class=\"x-grid-hd x-grid-td-{id} {cellId}\">","{value}<img class=\"x-grid-sort-icon\" src=\"",Ext.BLANK_IMAGE_URL,"\" />","</td>");_3.hcell.disableFormats=true;}_3.hcell.compile();if(!_3.hsplit){_3.hsplit=new Ext.Template("<div class=\"x-grid-split {splitId} x-grid-split-{id}\" style=\"{style}\" unselectable=\"on\">&#160;</div>");_3.hsplit.disableFormats=true;}_3.hsplit.compile();if(!_3.body){_3.body=new Ext.Template("<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">","<tbody>{rows}</tbody>","</table>");_3.body.disableFormats=true;}_3.body.compile();if(!_3.row){_3.row=new Ext.Template("<tr class=\"x-grid-row {alt}\">{cells}</tr>");_3.row.disableFormats=true;}_3.row.compile();if(!_3.cell){_3.cell=new Ext.Template("<td class=\"x-grid-col x-grid-td-{id} {cellId} {css}\" tabIndex=\"0\">","{value}","</td>");_3.cell.disableFormats=true;}_3.cell.compile();this.templates=_3;},initElements:function(){var E=Ext.Element;var el=this.grid.container.dom.firstChild;var cs=el.childNodes;this.el=new E(el);this.headerPanel=new E(el.firstChild);this.headerPanel.enableDisplayMode("block");this.mainWrap=new E(cs[1]);this.mainHd=new E(this.mainWrap.dom.firstChild);this.mainBody=new E(this.mainWrap.dom.childNodes[1]);this.footerPanel=new E(cs[2]);this.footerPanel.enableDisplayMode("block");this.focusEl=new E(cs[3]);this.focusEl.swallowEvent("click",true);this.resizeProxy=new E(cs[4]);this.headerSelector=String.format("#{0} td.x-grid-hd",this.mainHd.id);this.splitterSelector=String.format("#{0} div.x-grid-split",this.mainHd.id);},onDataChange:function(){this.refresh();this.updateHeaderSortState();},onClear:function(){this.refresh();},onUpdate:function(ds,_8){this.refreshRow(_8);},onAdd:function(ds,_a,_b){this.insertRows(ds,_b,_b+(_a.length-1));},onRemove:function(ds,_d,_e,_f){if(_f!==true){this.fireEvent("beforerowremoved",this,_e,_d);}var bt=this.getBodyTable();if(bt.rows[_e]){bt.firstChild.removeChild(bt.rows[_e]);}if(_f!==true){this.stripeRows(_e);this.layout();this.fireEvent("rowremoved",this,_e,_d);}},onLoad:function(){this.scrollToTop();},scrollToTop:function(){},getHeaderPanel:function(_11){if(_11){this.headerPanel.show();}return this.headerPanel;},getFooterPanel:function(_12){if(_12){this.footerPanel.show();}return this.footerPanel;},getHeaderCell:function(_13){return Ext.DomQuery.select(this.headerSelector)[_13];},getBodyTable:function(){return this.mainBody.dom.firstChild;},getRow:function(_14){return this.getBodyTable().rows[_14];},getCell:function(_15,_16){return this.getBodyTable().rows[_15].childNodes[_16];},getCellBox:function(_17){var b=this.fly(_17).getBox();if(Ext.isOpera){b.y=_17.offsetTop+this.mainBody.getY();}return b;},getCellIndex:function(_19){var id=String(_19.className).match(this.cellRE);if(id){return parseInt(id[1],10);}return 0;},findHeaderIndex:function(n){var r=Ext.fly(n).findParent("td."+this.hdClass,6);return r?this.getCellIndex(r):false;},findHeaderCell:function(n){var r=Ext.fly(n).findParent("td."+this.hdClass,6);return r?r:false;},findRowIndex:function(n){if(!n){return false;}var r=Ext.fly(n).findParent("tr."+this.rowClass,6);return r?r.rowIndex:false;},findCellIndex:function(_21){var _22=this.el.dom;while(_21&&_21!=_22){if(this.findRE.test(_21.className)){return this.getCellIndex(_21);}_21=_21.parentNode;}return false;},getColumnId:function(_23){return this.cm.getColumnId(_23);},getSplitters:function(){if(this.splitterSelector){return Ext.DomQuery.select(this.splitterSelector);}else{return null;}},getSplitter:function(_24){return this.getSplitters()[_24];},onRowOver:function(e,t){var row;if((row=this.findRowIndex(t))!==false){this.getRow(row).addClass("x-grid-row-over");}},onRowOut:function(e,t){var row;if((row=this.findRowIndex(t))!==false&&row!==this.findRowIndex(e.getRelatedTarget())){this.getRow(row).removeClass("x-grid-row-over");}},renderHeaders:function(){var cm=this.cm;var ct=this.templates.hcell,ht=this.templates.header,st=this.templates.hsplit;var cb=[],lb=[],sb=[],lsb=[],p={};for(var i=0,len=cm.getColumnCount();i<len;i++){p.cellId="x-grid-hd-0-"+i;p.splitId="x-grid-csplit-0-"+i;p.id=cm.getColumnId(i);p.title=cm.getColumnTooltip(i)||"";p.value=cm.getColumnHeader(i)||"";p.style=(this.grid.enableColumnResize===false||!cm.isResizable(i)||cm.isFixed(i))?"cursor:default":"";if(!cm.isLocked(i)){cb[cb.length]=ct.apply(p);sb[sb.length]=st.apply(p);}else{lb[lb.length]=ct.apply(p);lsb[lsb.length]=st.apply(p);}}return [ht.apply({cells:lb.join(""),splits:lsb.join("")}),ht.apply({cells:cb.join(""),splits:sb.join("")})];},updateHeaders:function(){var _36=this.renderHeaders();this.lockedHd.update(_36[0]);this.mainHd.update(_36[1]);},focusRow:function(row){var x=this.scroller.dom.scrollLeft;this.focusCell(row,0,false);this.scroller.dom.scrollLeft=x;},focusCell:function(row,col,_3b){var el=this.ensureVisible(row,col,_3b);this.focusEl.alignTo(el,"tl-tl");this.focusEl.focus.defer(1,this.focusEl);},ensureVisible:function(row,col,_3f){if(typeof row!="number"){row=row.rowIndex;}if(row<0&&row>=this.ds.getCount()){return;}col=(col!==undefined?col:0);var cm=this.grid.colModel;while(cm.isHidden(col)){col++;}var el=this.getCell(row,col);if(!el){return;}var c=this.scroller.dom;var _43=parseInt(el.offsetTop,10);var _44=parseInt(el.offsetLeft,10);var _45=_43+el.offsetHeight;var _46=_44+el.offsetWidth;var ch=c.clientHeight-this.mainHd.dom.offsetHeight;var _48=parseInt(c.scrollTop,10);var _49=parseInt(c.scrollLeft,10);var _4a=_48+ch;var _4b=_49+c.clientWidth;if(_43<_48){c.scrollTop=_43;}else{if(_45>_4a){c.scrollTop=_45-ch;}}if(_3f!==false){if(_44<_49){c.scrollLeft=_44;}else{if(_46>_4b){c.scrollLeft=_46-c.clientWidth;}}}return el;},updateColumns:function(){this.grid.stopEditing();var cm=this.grid.colModel,_4d=this.getColumnIds();var pos=0;for(var i=0,len=cm.getColumnCount();i<len;i++){var w=cm.getColumnWidth(i);this.css.updateRule(this.colSelector+_4d[i],"width",(w-this.borderWidth)+"px");this.css.updateRule(this.hdSelector+_4d[i],"width",(w-this.borderWidth)+"px");}this.updateSplitters();},updateSplitters:function(){var cm=this.cm,s=this.getSplitters();if(s){var pos=0,_55=true;for(var i=0,len=cm.getColumnCount();i<len;i++){if(cm.isHidden(i)){continue;}var w=cm.getColumnWidth(i);if(!cm.isLocked(i)&&_55){pos=0;_55=false;}pos+=w;s[i].style.left=(pos-this.splitOffset)+"px";}}},handleHiddenChange:function(_59,_5a,_5b){if(_5b){this.hideColumn(_5a);}else{this.unhideColumn(_5a);}},hideColumn:function(_5c){var cid=this.getColumnId(_5c);this.css.updateRule(this.tdSelector+cid,"display","none");this.css.updateRule(this.splitSelector+cid,"display","none");if(Ext.isSafari){this.updateHeaders();}this.updateSplitters();this.layout();},unhideColumn:function(_5e){var cid=this.getColumnId(_5e);this.css.updateRule(this.tdSelector+cid,"display","");this.css.updateRule(this.splitSelector+cid,"display","");if(Ext.isSafari){this.updateHeaders();}this.updateSplitters();this.layout();},insertRows:function(dm,_61,_62,_63){if(_61==0&&_62==dm.getCount()-1){this.refresh();}else{if(!_63){this.fireEvent("beforerowsinserted",this,_61,_62);}var s=this.getScrollState();var _65=this.renderRows(_61,_62);this.bufferRows(_65[0],this.getLockedTable(),_61);this.bufferRows(_65[1],this.getBodyTable(),_61);this.restoreScroll(s);if(!_63){this.fireEvent("rowsinserted",this,_61,_62);this.syncRowHeights(_61,_62);this.stripeRows(_61);this.layout();}}},bufferRows:function(_66,_67,_68){var _69=null,_6a=_67.rows,_6b=_67.tBodies[0];if(_68<_6a.length){_69=_6a[_68];}var b=document.createElement("div");b.innerHTML="<table><tbody>"+_66+"</tbody></table>";var _6d=b.firstChild.rows;for(var i=0,len=_6d.length;i<len;i++){if(_69){_6b.insertBefore(_6d[0],_69);}else{_6b.appendChild(_6d[0]);}}b.innerHTML="";b=null;},deleteRows:function(dm,_71,_72){if(dm.getRowCount()<1){this.fireEvent("beforerefresh",this);this.mainBody.update("");this.lockedBody.update("");this.fireEvent("refresh",this);}else{this.fireEvent("beforerowsdeleted",this,_71,_72);var bt=this.getBodyTable();var _74=bt.firstChild;var _75=bt.rows;for(var _76=_71;_76<=_72;_76++){_74.removeChild(_75[_71]);}this.stripeRows(_71);this.fireEvent("rowsdeleted",this,_71,_72);}},updateRows:function(_77,_78,_79){var s=this.getScrollState();this.refresh();this.restoreScroll(s);},handleSort:function(_7b,_7c,_7d,_7e){if(!_7e){this.refresh();}this.updateHeaderSortState();},getScrollState:function(){var sb=this.scroller.dom;return {left:sb.scrollLeft,top:sb.scrollTop};},stripeRows:function(_80){if(!this.grid.stripeRows||this.ds.getCount()<1){return;}_80=_80||0;var _81=this.getBodyTable().rows;var _82=this.getLockedTable().rows;var cls=" x-grid-row-alt ";for(var i=_80,len=_81.length;i<len;i++){var row=_81[i],_87=_82[i];var _88=((i+1)%2==0);var _89=(" "+row.className+" ").indexOf(cls)!=-1;if(_88==_89){continue;}if(_88){row.className+=" x-grid-row-alt";}else{row.className=row.className.replace("x-grid-row-alt","");}if(_87){_87.className=row.className;}}},restoreScroll:function(_8a){var sb=this.scroller.dom;sb.scrollLeft=_8a.left;sb.scrollTop=_8a.top;this.syncScroll();},syncScroll:function(){var sb=this.scroller.dom;var sh=this.mainHd.dom;var bs=this.mainBody.dom;var lv=this.lockedBody.dom;sh.scrollLeft=bs.scrollLeft=sb.scrollLeft;lv.scrollTop=bs.scrollTop=sb.scrollTop;},handleScroll:function(e){this.syncScroll();var sb=this.scroller.dom;this.grid.fireEvent("bodyscroll",sb.scrollLeft,sb.scrollTop);e.stopEvent();},handleWheel:function(e){var d=e.getWheelDelta();this.scroller.dom.scrollTop-=d*22;this.lockedBody.dom.scrollTop=this.mainBody.dom.scrollTop=this.scroller.dom.scrollTop;e.stopEvent();},renderRows:function(_94,_95){var g=this.grid,cm=g.colModel,ds=g.dataSource,_99=g.stripeRows;var _9a=cm.getColumnCount();if(ds.getCount()<1){return ["",""];}var cs=[];for(var i=0;i<_9a;i++){var _9d=cm.getDataIndex(i);cs[i]={name:typeof _9d=="undefined"?ds.fields.get(i).name:_9d,renderer:cm.getRenderer(i),id:cm.getColumnId(i),locked:cm.isLocked(i)};}_94=_94||0;_95=typeof _95=="undefined"?ds.getCount()-1:_95;var rs=ds.getRange(_94,_95);return this.doRender(cs,rs,ds,_94,_9a,_99);},doRender:Ext.isGecko?function(cs,rs,ds,_a2,_a3,_a4){var ts=this.templates,ct=ts.cell,rt=ts.row;var buf="",_a9="",cb,lcb,c,p={},rp={},r;for(var j=0,len=rs.length;j<len;j++){r=rs[j],cb="",lcb="",rowIndex=(j+_a2);for(var i=0;i<_a3;i++){c=cs[i];p.cellId="x-grid-cell-"+rowIndex+"-"+i;p.id=c.id;p.css=p.attr="";p.value=c.renderer(r.data[c.name],p,r,rowIndex,i,ds);if(p.value==undefined||p.value===""){p.value="&#160;";}if(r.dirty&&typeof r.modified[c.name]!=="undefined"){p.css+=p.css?" x-grid-dirty-cell":"x-grid-dirty-cell";}var _b3=ct.apply(p);if(!c.locked){cb+=_b3;}else{lcb+=_b3;}}var alt=[];if(_a4&&((rowIndex+1)%2==0)){alt[0]="x-grid-row-alt";}if(r.dirty){alt[1]=" x-grid-dirty-row";}rp.cells=lcb;if(this.getRowClass){alt[2]=this.getRowClass(r,rowIndex);}rp.alt=alt.join(" ");_a9+=rt.apply(rp);rp.cells=cb;buf+=rt.apply(rp);}return [_a9,buf];}:function(cs,rs,ds,_b8,_b9,_ba){var ts=this.templates,ct=ts.cell,rt=ts.row;var buf=[],_bf=[],cb,lcb,c,p={},rp={},r;for(var j=0,len=rs.length;j<len;j++){r=rs[j],cb=[],lcb=[],rowIndex=(j+_b8);for(var i=0;i<_b9;i++){c=cs[i];p.cellId="x-grid-cell-"+rowIndex+"-"+i;p.id=c.id;p.css=p.attr="";p.value=c.renderer(r.data[c.name],p,r,rowIndex,i,ds);if(p.value==undefined||p.value===""){p.value="&#160;";}if(r.dirty&&typeof r.modified[c.name]!=="undefined"){p.css+=p.css?" x-grid-dirty-cell":"x-grid-dirty-cell";}var _c9=ct.apply(p);if(!c.locked){cb[cb.length]=_c9;}else{lcb[lcb.length]=_c9;}}var alt=[];if(_ba&&((rowIndex+1)%2==0)){alt[0]="x-grid-row-alt";}if(r.dirty){alt[1]=" x-grid-dirty-row";}rp.cells=lcb;if(this.getRowClass){alt[2]=this.getRowClass(r,rowIndex);}rp.alt=alt.join(" ");rp.cells=lcb.join("");_bf[_bf.length]=rt.apply(rp);rp.cells=cb.join("");buf[buf.length]=rt.apply(rp);}return [_bf.join(""),buf.join("")];},renderBody:function(){var _cb=this.renderRows();var bt=this.templates.body;return [bt.apply({rows:_cb[0]}),bt.apply({rows:_cb[1]})];},refreshRow:function(_cd){var ds=this.ds,_cf;if(typeof _cd=="number"){_cf=_cd;_cd=ds.getAt(_cf);}else{_cf=ds.indexOf(_cd);}var cls=[];this.insertRows(ds,_cf,_cf,true);this.onRemove(ds,_cd,_cf+1,true);this.layout();this.fireEvent("rowupdated",this,_cf,_cd);},refresh:function(_d1){this.fireEvent("beforerefresh",this);this.grid.stopEditing();var _d2=this.renderBody();this.lockedBody.update(_d2[0]);this.mainBody.update(_d2[1]);if(_d1===true){this.updateHeaders();this.updateColumns();this.updateSplitters();this.updateHeaderSortState();}this.syncRowHeights();this.layout();this.fireEvent("refresh",this);},handleColumnMove:function(cm,_d4,_d5){this.indexMap=null;var s=this.getScrollState();this.refresh(true);this.restoreScroll(s);this.afterMove(_d5);},afterMove:function(_d7){if(this.enableMoveAnim&&Ext.enableFx){this.fly(this.getHeaderCell(_d7).firstChild).highlight(this.hlColor);}},updateCell:function(dm,_d9,_da){var _db=this.getColumnIndexByDataIndex(_da);if(typeof _db=="undefined"){return;}var cm=this.grid.colModel;var _dd=this.getCell(_d9,_db);var _de=this.getCellText(_d9,_db);var p={cellId:"x-grid-cell-"+_d9+"-"+_db,id:cm.getColumnId(_db),css:_db==cm.getColumnCount()-1?"x-grid-col-last":""};var _e0=cm.getRenderer(_db);var val=_e0(dm.getValueAt(_d9,_da),p,_d9,_db,dm);if(typeof val=="undefined"||val===""){val="&#160;";}_de.innerHTML=val;_dd.className=this.cellClass+" "+p.cellId+" "+p.css;this.syncRowHeights(_d9,_d9);},onRowSelect:function(_e2){var row=this.getRowComposite(_e2);row.addClass("x-grid-row-selected");},onRowDeselect:function(_e4){var row=this.getRowComposite(_e4);row.removeClass("x-grid-row-selected");},onCellSelect:function(row,col){var _e8=this.getCell(row,col);if(_e8){Ext.fly(_e8).addClass("x-grid-cell-selected");}},onCellDeselect:function(row,col){var _eb=this.getCell(row,col);if(_eb){Ext.fly(_eb).removeClass("x-grid-cell-selected");}},updateHeaderSortState:function(){var _ec=this.ds.getSortState();if(!_ec){return;}this.sortState=_ec;var _ed=this.cm.findColumnIndex(_ec.field);if(_ed!=-1){var _ee=_ec.direction;var sc=this.sortClasses;var hds=this.el.select(this.headerSelector).removeClass(sc);hds.item(_ed).addClass(sc[_ee=="DESC"?1:0]);}},handleHeaderClick:function(g,_f2){if(this.headersDisabled){return;}var dm=g.dataSource,cm=g.colModel;if(!cm.isSortable(_f2)){return;}g.stopEditing();dm.sort(cm.getDataIndex(_f2));},destroy:function(){if(this.colMenu){this.colMenu.removeAll();Ext.menu.MenuMgr.unregister(this.colMenu);this.colMenu.getEl().remove();delete this.colMenu;}if(this.hmenu){this.hmenu.removeAll();Ext.menu.MenuMgr.unregister(this.hmenu);this.hmenu.getEl().remove();delete this.hmenu;}if(this.grid.enableColumnMove){var dds=Ext.dd.DDM.ids["gridHeader"+this.grid.container.id];if(dds){for(var dd in dds){if(!dds[dd].config.isTarget&&dds[dd].dragElId){var _f7=dds[dd].dragElId;dds[dd].unreg();Ext.get(_f7).remove();}else{if(dds[dd].config.isTarget){dds[dd].proxyTop.remove();dds[dd].proxyBottom.remove();dds[dd].unreg();}}if(Ext.dd.DDM.locationCache[dd]){delete Ext.dd.DDM.locationCache[dd];}}delete Ext.dd.DDM.ids["gridHeader"+this.grid.container.id];}}this.bind(null,null);Ext.EventManager.removeResizeListener(this.onWindowResize,this);},handleLockChange:function(){this.refresh(true);},onDenyColumnLock:function(){},onDenyColumnHide:function(){},handleHdMenuClick:function(_f8){var _f9=this.hdCtxIndex;var cm=this.cm,ds=this.ds;switch(_f8.id){case "asc":ds.sort(cm.getDataIndex(_f9),"ASC");break;case "desc":ds.sort(cm.getDataIndex(_f9),"DESC");break;case "lock":var lc=cm.getLockedCount();if(cm.getColumnCount(true)<=lc+1){this.onDenyColumnLock();return;}if(lc!=_f9){cm.setLocked(_f9,true,true);cm.moveColumn(_f9,lc);this.grid.fireEvent("columnmove",_f9,lc);}else{cm.setLocked(_f9,true);}break;case "unlock":var lc=cm.getLockedCount();if((lc-1)!=_f9){cm.setLocked(_f9,false,true);cm.moveColumn(_f9,lc-1);this.grid.fireEvent("columnmove",_f9,lc-1);}else{cm.setLocked(_f9,false);}break;default:_f9=cm.getIndexById(_f8.id.substr(4));if(_f9!=-1){if(_f8.checked&&cm.getColumnCount(true)<=1){this.onDenyColumnHide();return false;}cm.setHidden(_f9,_f8.checked);}}return true;},beforeColMenuShow:function(){var cm=this.cm,_fe=cm.getColumnCount();this.colMenu.removeAll();for(var i=0;i<_fe;i++){this.colMenu.add(new Ext.menu.CheckItem({id:"col-"+cm.getColumnId(i),text:cm.getColumnHeader(i),checked:!cm.isHidden(i),hideOnClick:false}));}},handleHdCtx:function(g,_101,e){e.stopEvent();var hd=this.getHeaderCell(_101);this.hdCtxIndex=_101;var ms=this.hmenu.items,cm=this.cm;ms.get("asc").setDisabled(!cm.isSortable(_101));ms.get("desc").setDisabled(!cm.isSortable(_101));if(this.grid.enableColLock!==false){ms.get("lock").setDisabled(cm.isLocked(_101));ms.get("unlock").setDisabled(!cm.isLocked(_101));}this.hmenu.show(hd,"tl-bl");},handleHdOver:function(e){var hd=this.findHeaderCell(e.getTarget());if(hd&&!this.headersDisabled){if(this.grid.colModel.isSortable(this.getCellIndex(hd))){this.fly(hd).addClass("x-grid-hd-over");}}},handleHdOut:function(e){var hd=this.findHeaderCell(e.getTarget());if(hd){this.fly(hd).removeClass("x-grid-hd-over");}},handleSplitDblClick:function(e,t){var i=this.getCellIndex(t);if(this.grid.enableColumnResize!==false&&this.cm.isResizable(i)&&!this.cm.isFixed(i)){this.autoSizeColumn(i,true);this.layout();}},render:function(){var cm=this.cm;var _10e=cm.getColumnCount();if(this.grid.monitorWindowResize===true){Ext.EventManager.onWindowResize(this.onWindowResize,this,true);}var _10f=this.renderHeaders();var body=this.templates.body.apply({rows:""});var html=this.templates.master.apply({lockedBody:body,body:body,lockedHeader:_10f[0],header:_10f[1]});this.updateColumns();this.grid.container.dom.innerHTML=html;this.initElements();this.scroller.on("scroll",this.handleScroll,this);this.lockedBody.on("mousewheel",this.handleWheel,this);this.mainBody.on("mousewheel",this.handleWheel,this);this.mainHd.on("mouseover",this.handleHdOver,this);this.mainHd.on("mouseout",this.handleHdOut,this);this.mainHd.on("dblclick",this.handleSplitDblClick,this,{delegate:"."+this.splitClass});this.lockedHd.on("mouseover",this.handleHdOver,this);this.lockedHd.on("mouseout",this.handleHdOut,this);this.lockedHd.on("dblclick",this.handleSplitDblClick,this,{delegate:"."+this.splitClass});if(this.grid.enableColumnResize!==false){new Ext.grid.SplitDragZone(this.grid,this.lockedHd.dom,this.mainHd.dom);}this.updateSplitters();if(this.grid.enableColumnMove){new Ext.grid.HeaderDragZone(this.grid,this.lockedHd.dom,this.mainHd.dom);new Ext.grid.HeaderDropZone(this.grid,this.lockedHd.dom,this.mainHd.dom);}if(this.grid.enableCtxMenu!==false){this.colMenu=new Ext.menu.Menu({id:this.grid.id+"-hcols-menu"});this.colMenu.on("beforeshow",this.beforeColMenuShow,this);this.colMenu.on("itemclick",this.handleHdMenuClick,this);this.hmenu=new Ext.menu.Menu({id:this.grid.id+"-hctx"});this.hmenu.add({id:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{id:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"},"separator");if(this.grid.enableColLock!==false){this.hmenu.add({id:"lock",text:this.lockText,cls:"xg-hmenu-lock"},{id:"unlock",text:this.unlockText,cls:"xg-hmenu-unlock"},"separator");}this.hmenu.add({id:"columns",text:this.columnsText,menu:this.colMenu});this.hmenu.on("itemclick",this.handleHdMenuClick,this);this.grid.on("headercontextmenu",this.handleHdCtx,this);}if(this.grid.enableDragDrop||this.grid.enableDrag){var dd=new Ext.grid.GridDragZone(this.grid,{ddGroup:this.grid.ddGroup||"GridDD"});}for(var i=0;i<_10e;i++){if(cm.isHidden(i)){this.hideColumn(i);}if(cm.config[i].align){this.css.updateRule(this.colSelector+i,"textAlign",cm.config[i].align);this.css.updateRule(this.hdSelector+i,"textAlign",cm.config[i].align);}}this.updateHeaderSortState();this.beforeInitialResize();this.layout(true);this.renderPhase2.defer(1,this);},renderPhase2:function(){this.refresh();if(this.grid.autoSizeColumns){this.autoSizeColumns();}},beforeInitialResize:function(){},onColumnSplitterMoved:function(i,w){console.profile();this.userResized=true;var cm=this.grid.colModel;cm.setColumnWidth(i,w,true);var cid=cm.getColumnId(i);this.css.updateRule(this.tdSelector+cid,"width",(w-this.borderWidth)+"px");this.updateSplitters();this.layout();console.profileEnd();this.grid.fireEvent("columnresize",i,w);},syncRowHeights:function(_118,_119){if(this.grid.enableRowHeightSync===true&&this.cm.getLockedCount()>0){_118=_118||0;var _11a=this.getBodyTable().rows;var _11b=this.getLockedTable().rows;var len=_11a.length-1;_119=Math.min(_119||len,len);for(var i=_118;i<=_119;i++){var m=_11a[i],l=_11b[i];var h=Math.max(m.offsetHeight,l.offsetHeight);m.style.height=l.style.height=h+"px";}}},layout:function(_121,_122){var g=this.grid;var auto=g.autoHeight;var _125=16;var c=g.container,cm=this.cm,_128=g.autoExpandColumn,gv=this;var _12a=this.cm.isLocked(0);var tbh=this.headerPanel.getHeight();var bbh=this.footerPanel.getHeight();if(auto){var ch=this.getBodyTable().offsetHeight+tbh+bbh+this.mainHd.getHeight();var _12e=ch+c.getBorderWidth("tb");if(g.maxHeight){_12e=Math.min(g.maxHeight,_12e);}c.setHeight(_12e);}if(g.autoWidth){c.setWidth(cm.getTotalWidth()+c.getBorderWidth("lr"));}var s=this.scroller;var _130=c.getSize(true);this.el.setSize(_130.width,_130.height);this.headerPanel.setWidth(_130.width);this.footerPanel.setWidth(_130.width);var _131=this.mainHd.getHeight();var vw=_130.width;var vh=_130.height-(tbh+bbh);s.setSize(vw,vh);var bt=this.getBodyTable();var _135=_12a?Math.max(this.getLockedTable().offsetWidth,this.lockedHd.dom.firstChild.offsetWidth):0;var _136=bt.offsetHeight;var _137=_135+bt.offsetWidth;var _138=false,_139=false;this.scrollSizer.setSize(_137,_136+_131);var lw=this.lockedWrap,mw=this.mainWrap;var lb=this.lockedBody,mb=this.mainBody;setTimeout(function(){var t=s.dom.offsetTop;var w=s.dom.clientWidth,h=s.dom.clientHeight;lw.setTop(t);lw.setSize(_135,h);mw.setLeftTop(_135,t);mw.setSize(w-_135,h);lb.setHeight(h-_131);mb.setHeight(h-_131);if(_122!==true&&!gv.userResized&&_128){var ci=cm.getIndexById(_128);var tw=cm.getTotalWidth(false);var _143=cm.getColumnWidth(ci);var cw=Math.min(Math.max(((w-tw)+_143-2)-(w<=s.dom.offsetWidth?0:18),g.autoExpandMin),g.autoExpandMax);if(_143!=cw){cm.setColumnWidth(ci,cw,true);gv.css.updateRule(gv.colSelector+_128,"width",(cw-gv.borderWidth)+"px");gv.css.updateRule(gv.hdSelector+_128,"width",(cw-gv.borderWidth)+"px");gv.updateSplitters();gv.layout(false,true);}}if(_121){lw.show();mw.show();}},10);},onWindowResize:function(){if(!this.grid.monitorWindowResize||this.grid.autoHeight){return;}this.layout();},appendFooter:function(_145){return null;},sortAscText:"Sort Ascending",sortDescText:"Sort Descending",lockText:"Lock Column",unlockText:"Unlock Column",columnsText:"Columns"});
